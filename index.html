<!DOCTYPE html>

<html>
	<head>
	
	<script src="gl-matrix.js"></script>
	<script src="sink3d.js"></script>
	<script src="sinkutils.js"></script>

	<script>
		'use strict';

		function startup() {
			SINK3D.init();
			update();
		}

		function vertex(x, y, z) {
			var pos = vec4.fromValues(x,y,z,1);
			var col = vec4.fromValues(255,0,0,255);

			return new SINK3D.Vertex(pos, col);
		}

		var rot = 0.0;

		function cube() {
			var verticies = new Array();
			verticies[0] = vertex(-0.5, -0.5, -0.5);
			verticies[1] = vertex(-0.5,  0.5, -0.5);
			verticies[2] = vertex( 0.5,  0.5, -0.5);
			verticies[3] = vertex( 0.5, -0.5, -0.5);
			verticies[4] = vertex(-0.5, -0.5,  0.5);
			verticies[5] = vertex(-0.5,  0.5,  0.5);
			verticies[6] = vertex( 0.5,  0.5,  0.5);
			verticies[7] = vertex( 0.5, -0.5,  0.5);

			var geom = new SINK3D.Geometry(verticies);
			geom.mmat = mat4.create();

			mat4.fromYRotation(geom.mmat, rot += 0.01);

			return geom;
		}

		function update() {
			window.requestAnimationFrame(update);

			SINK3D.clear();

			SINK3D.draw(cube());

			SINK3D.drawBuffer();
		}

	</script>

	</head>

	<body onload="startup()">
		<canvas id="canvas2d" width="800" height="600"></canvas>
	</body>
</html>

